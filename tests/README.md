# Fusion360 MCP æµ‹è¯•è¯´æ˜

è¿™ä¸ªç›®å½•åŒ…å«äº† Fusion360 MCP é¡¹ç›®çš„æ‰€æœ‰å•å…ƒæµ‹è¯•ï¼Œæ¯ä¸ªå·¥å…·éƒ½æœ‰ç‹¬ç«‹çš„æµ‹è¯•æ–‡ä»¶ï¼Œä¾¿äºè°ƒè¯•å’Œç»´æŠ¤ã€‚

## æµ‹è¯•ç»“æ„

```
tests/
â”œâ”€â”€ __init__.py              # æµ‹è¯•åŒ…åˆå§‹åŒ–
â”œâ”€â”€ test_base.py             # æµ‹è¯•åŸºç±»å’Œå…¬å…±å·¥å…·
â”œâ”€â”€ test_document_tools.py   # æ–‡æ¡£å·¥å…·æµ‹è¯•
â”œâ”€â”€ test_object_tools.py     # å¯¹è±¡å·¥å…·æµ‹è¯•
â”œâ”€â”€ test_part_tools.py       # é›¶ä»¶å·¥å…·æµ‹è¯•
â”œâ”€â”€ test_view_tools.py       # è§†å›¾å·¥å…·æµ‹è¯•
â”œâ”€â”€ test_execute_tools.py    # ä»£ç æ‰§è¡Œå·¥å…·æµ‹è¯•
â”œâ”€â”€ run_tests.py             # ä¸»æµ‹è¯•è¿è¡Œå™¨
â”œâ”€â”€ quick_test.py            # å¿«é€Ÿæµ‹è¯•è„šæœ¬
â””â”€â”€ README.md                # æœ¬æ–‡æ¡£
```

## è¿è¡Œæµ‹è¯•

### 1. å®Œæ•´æµ‹è¯•å¥—ä»¶

è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼š
```bash
# æ–¹å¼ 1: ç›´æ¥è¿è¡Œ
python tests/run_tests.py

# æ–¹å¼ 2: ä½¿ç”¨å®‰è£…çš„å‘½ä»¤
fusion360_mcp_test

# æ–¹å¼ 3: ä½¿ç”¨ unittest
python -m unittest discover tests
```

### 2. è¿è¡Œç‰¹å®šæµ‹è¯•

è¿è¡Œå•ä¸ªæµ‹è¯•å¥—ä»¶ï¼š
```bash
python tests/run_tests.py æ–‡æ¡£å·¥å…·
python tests/run_tests.py å¯¹è±¡å·¥å…·
python tests/run_tests.py é›¶ä»¶å·¥å…·
```

è¿è¡Œå¤šä¸ªæŒ‡å®šæµ‹è¯•ï¼š
```bash
python tests/run_tests.py æ–‡æ¡£å·¥å…· å¯¹è±¡å·¥å…·
```

### 3. å¿«é€Ÿæµ‹è¯•

å¿«é€ŸéªŒè¯åŸºæœ¬åŠŸèƒ½ï¼š
```bash
# è¿è¡Œæ‰€æœ‰å¿«é€Ÿæµ‹è¯•
python tests/quick_test.py

# æˆ–ä½¿ç”¨å®‰è£…çš„å‘½ä»¤
fusion360_mcp_quick_test

# è¿è¡Œç‰¹å®šå¿«é€Ÿæµ‹è¯•
python tests/quick_test.py doc      # æ–‡æ¡£æµ‹è¯•
python tests/quick_test.py obj      # å¯¹è±¡æµ‹è¯•
python tests/quick_test.py part     # é›¶ä»¶æµ‹è¯•
python tests/quick_test.py mgmt     # å¯¹è±¡ç®¡ç†æµ‹è¯•
```

### 4. å•ç‹¬è¿è¡Œæµ‹è¯•æ–‡ä»¶

```bash
python -m unittest tests.test_document_tools
python -m unittest tests.test_object_tools.TestObjectTools.test_create_cylinder
```

## æµ‹è¯•ç±»å‹

### ğŸ“„ æ–‡æ¡£å·¥å…·æµ‹è¯• (test_document_tools.py)
- åˆ›å»ºæ–‡æ¡£ï¼ˆé»˜è®¤å‚æ•°ã€è‡ªå®šä¹‰å‚æ•°ï¼‰
- å¤šæ–‡æ¡£åˆ›å»º
- å•ä½éªŒè¯
- æ¨¡æ¿æ”¯æŒ

### ğŸ”µ å¯¹è±¡å·¥å…·æµ‹è¯• (test_object_tools.py)
- åŸºæœ¬å‡ ä½•ä½“åˆ›å»ºï¼ˆåœ†æŸ±ã€ç«‹æ–¹ä½“ã€çƒä½“ï¼‰
- å¯¹è±¡è·å–å’Œç®¡ç†
- å¯¹è±¡åˆ é™¤
- ä½ç½®å®šä½

### ğŸ”§ é›¶ä»¶å·¥å…·æµ‹è¯• (test_part_tools.py)
- é›¶ä»¶åˆ—è¡¨è·å–
- é›¶ä»¶å†…å®¹éªŒè¯
- é›¶ä»¶æ’å…¥æ¨¡æ‹Ÿ
- åº“åˆ†ç±»æµ‹è¯•

### ğŸ‘ï¸ è§†å›¾å·¥å…·æµ‹è¯• (test_view_tools.py)
- è§†å›¾æˆªå›¾ï¼ˆé»˜è®¤å’Œè‡ªå®šä¹‰å‚æ•°ï¼‰
- ä¸åŒåˆ†è¾¨ç‡å’Œæ ¼å¼
- ç›¸æœºå’Œç›®æ ‡ä½ç½®
- æ€§èƒ½æµ‹è¯•

### ğŸ’» ä»£ç æ‰§è¡Œæµ‹è¯• (test_execute_tools.py)
- ç®€å•ä»£ç æ‰§è¡Œ
- Fusion 360 API ä»£ç 
- é”™è¯¯å¤„ç†å’Œå®‰å…¨æ£€æŸ¥
- æ€§èƒ½æµ‹è¯•

## æµ‹è¯•ç‰¹æ€§

### ğŸ”„ å¼‚æ­¥æµ‹è¯•æ”¯æŒ
æ‰€æœ‰æµ‹è¯•éƒ½åŸºäº `AsyncTestCase` åŸºç±»ï¼Œæ”¯æŒå¼‚æ­¥æ“ä½œæµ‹è¯•ã€‚

### ğŸ­ æ¨¡æ‹Ÿ API
ä½¿ç”¨ `MockFusion360API` ç±»æ¨¡æ‹Ÿ Fusion 360 API è°ƒç”¨ï¼Œæ— éœ€å®é™… Fusion 360 ç¯å¢ƒã€‚

### ğŸ“Š è¯¦ç»†æŠ¥å‘Š
æä¾›è¯¦ç»†çš„æµ‹è¯•ç»“æœæŠ¥å‘Šï¼ŒåŒ…æ‹¬ï¼š
- æˆåŠŸç‡ç»Ÿè®¡
- æ‰§è¡Œæ—¶é—´
- å¤±è´¥è¯¦æƒ…
- æ€§èƒ½æŒ‡æ ‡

### ğŸ›¡ï¸ é”™è¯¯å¤„ç†
æµ‹è¯•åŒ…å«å®Œæ•´çš„é”™è¯¯å¤„ç†åœºæ™¯ï¼š
- æ— æ•ˆå‚æ•°
- ç½‘ç»œé”™è¯¯
- API å¤±è´¥
- å®‰å…¨æ£€æŸ¥

## è°ƒè¯•æµ‹è¯•

### æŸ¥çœ‹è¯¦ç»†è¾“å‡º
```bash
python tests/run_tests.py --verbose
```

### æŸ¥çœ‹å¯ç”¨æµ‹è¯•
```bash
python tests/run_tests.py --list
```

### è·å–å¸®åŠ©
```bash
python tests/run_tests.py --help
```

## ç¼–å†™æ–°æµ‹è¯•

### 1. ç»§æ‰¿æµ‹è¯•åŸºç±»
```python
from tests.test_base import Fusion360TestBase

class TestMyTool(Fusion360TestBase):
    def setUp(self):
        super().setUp()
        self.mock_api = MockFusion360API()
```

### 2. ç¼–å†™æµ‹è¯•æ–¹æ³•
```python
def test_my_feature(self):
    """æµ‹è¯•æˆ‘çš„åŠŸèƒ½"""
    async def test():
        result = await self.mock_api.my_function()
        self.log_test_result("æˆ‘çš„åŠŸèƒ½æµ‹è¯•", result)
        self.assert_api_call_success(result)

    self.async_test(test())
```

### 3. æ·»åŠ åˆ°æµ‹è¯•è¿è¡Œå™¨
åœ¨ `run_tests.py` çš„ `test_suites` ä¸­æ·»åŠ æ–°çš„æµ‹è¯•ç±»ã€‚

## æœ€ä½³å®è·µ

### âœ… å¥½çš„æµ‹è¯•
- æ¯ä¸ªæµ‹è¯•å‡½æ•°æµ‹è¯•ä¸€ä¸ªç‰¹å®šåŠŸèƒ½
- ä½¿ç”¨æè¿°æ€§çš„æµ‹è¯•åç§°
- åŒ…å«è¾¹ç•Œæ¡ä»¶å’Œé”™è¯¯æƒ…å†µ
- è®°å½•æµ‹è¯•ç»“æœ

### âŒ é¿å…çš„åšæ³•
- æµ‹è¯•ä¹‹é—´ç›¸äº’ä¾èµ–
- ç¡¬ç¼–ç çš„ç¯å¢ƒç‰¹å®šå€¼
- è¿‡åº¦å¤æ‚çš„æµ‹è¯•é€»è¾‘
- å¿½ç•¥å¼‚å¸¸å¤„ç†

## æŒç»­é›†æˆ

è¿™äº›æµ‹è¯•å¯ä»¥é›†æˆåˆ° CI/CD æµç¨‹ä¸­ï¼š

```yaml
# .github/workflows/test.yml ç¤ºä¾‹
- name: Run tests
  run: |
    pip install -e .
    python tests/run_tests.py
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **å¯¼å…¥é”™è¯¯**
   - ç¡®ä¿é¡¹ç›®æ ¹ç›®å½•åœ¨ Python è·¯å¾„ä¸­
   - æ£€æŸ¥ `__init__.py` æ–‡ä»¶æ˜¯å¦å­˜åœ¨

2. **å¼‚æ­¥æµ‹è¯•å¤±è´¥**
   - ç¡®ä¿ä½¿ç”¨ `self.async_test()` åŒ…è£…å¼‚æ­¥æµ‹è¯•
   - æ£€æŸ¥ `setUp()` å’Œ `tearDown()` è°ƒç”¨

3. **æ¨¡æ‹Ÿ API é—®é¢˜**
   - é‡ç½® `MockFusion360API` çŠ¶æ€
   - æ£€æŸ¥è°ƒç”¨å†å²è®°å½•

### è”ç³»æ”¯æŒ
å¦‚æœ‰æµ‹è¯•ç›¸å…³é—®é¢˜ï¼Œè¯·æäº¤ issue æˆ–æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£ã€‚
